<!DOCTYPE HTML>
<html class="h-100">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="apple-touch-icon" sizes="120x120" href="assets/VLFavicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/VLFavicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/VLFavicon/favicon-16x16.png">
  <link rel="manifest" href="assets/VLFavicon/site.webmanifest">
  <link rel="mask-icon" href="assets/VLFavicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <script type="text/javascript" src="assets/js/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
  
  <link rel="stylesheet" href="assets/css/Vault-Lambda.css">
  <script src="https://unpkg.com/feather-icons"></script>
  
</head>
<body class="d-flex flex-column h-100">
<div class="container-fluid">
  <nav class="row navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="index.html"><img src="assets/images/Vault_Lambda_Logo.png" height="35"/></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="ideal.html">Ideal</a>
        </li>
        <!--<li class="nav-item">
          <a class="nav-link" href="#">Team</a>
        </li>-->
        <li class="nav-item">
          <a class="nav-link" href="service.html">Service</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
      <!--<form class="form-inline my-2 my-lg-0">
        <input class="form-control form-control-sm mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-sm btn-outline-primary my-2 my-sm-0" type="submit">Search</button>
      </form>-->
    </div>
  </nav>
  <div class="row">
    <div class="col-sm">
      <div class="mt-4 jumbotron text-center">
        <h6 class="display-4 text-dark">
          Consult With Us
        </h6>
        <p class="lead">
          If we can't help you on your mission, we know someone that can
        </p>
      </div>
    </div>
  </div>
  <div class="row mt-2 align-items-center">
    <div class="container">
        <!-- Add Contact Form Later
        <form>
            <div class="form-group">
                <label for="exampleFormControlInput1">Email</label>
                <input type="email" class="form-control" id="email" placeholder="name@example.com">
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Full Name</label>
                <input type="email" class="form-control" id="name" placeholder="First Last">
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Phone #</label>
                <input type="email" class="form-control" id="phone" placeholder="(203) 241-2093">
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Your Inquiry</label>
                <textarea class="form-control" id="inquiry" rows="3"></textarea>
            </div>
            <div class="row"><button id="s-cont" type="button" class="btn btn-outline-secondary mb-2 mx-auto">Request Consultation</button></div>
        </form>
        <h1 class="display-4 m-4 text-center text-muted">OR</h1>-->
        <div class="row mt-4">
            <div class="mt-4 col-sm align-items-center">
                <div class="card mx-auto" style="width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Email Us</h5>
                      <p class="card-text">We mean it, if we can't help you find what you're looking, we'll guide you to someone who can.</p>
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item"><i data-feather="mail" style="color:gray;" class="mr-2"></i><a href="mailto:info@VaultLamdbda.com">info@vaultlambda.com</a></li>
                    </ul>
                  </div>
            </div>
        </div>
    </div>
  </div>
</div>
<footer class="d-flex footer mt-auto py-3">
  <div class="container text-center">
    <span class="text-muted"><small>Copyright Vault Lambda LLC<br>2018 - <span id="current-year"></span></small></span>
  </div>
</footer>

<script>
  feather.replace();

  function get(name){
    if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search)){
      return decodeURIComponent(name[1]);
    }
    else{
      return false;
    }
  }

  document.body.onload = function() { var d = new Date(); document.getElementById("current-year").innerHTML=d.getFullYear(); 
  
  $("#email").on("keyup",function(){
    callConserver.delay(()=>{
      var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://webapps3.liu.edu/BITools/api/v1.0.0/Auth/Validate",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json"
        },
        "processData": false,
        "data": JSON.stringify({
          "FieldName": "Email",
          "FieldContent": this.value,
          "Validations": [
            "email"
          ]
        })
      }

      $.ajax(settings).done(function (response) {
        
        $("#email").removeClass("border-danger");
        $("#email").removeClass("border-success");
        if(response["Data"]["passed"]==true){
          $("#email").addClass("border-success");
          $("#email").popover('hide');
        }
        else{
          $("#email").addClass("border-danger");
          $("#email").popover({
            content:"Please enter a valid email address ryan@myemail.com",
            placement:"top"
          });
          $("#email").popover('show');
        }
      });
    })
  })

  $("#name").on("keyup",function(){
    validateName();
  })

  $("#phone").on("keyup",function(){
    validatePhone();
  })
  
  $("#s-cont").on("click",function(event){
    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "https://webapps3.liu.edu/BITools/api/v1.0.0/Auth/Validate",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "processData": false,
      "data": JSON.stringify({
        "FieldName": "Email",
        "FieldContent": "hello@whatever.com",
        "Validations": [
          "email"
        ]
      })
    }
    
    $.ajax(settings).done(function (response) {
      if(response["Data"]["passed"]==true){
        if(validateName()){
          if(validatePhone()){
            $.ajax({
              method: "POST",
              crossDomain:true,
              headers:{
          "Content-Type":"application/json"
              },
              "url":"https://booked.vaultlambda.com/contact",
              data: JSON.stringify({ 
                "email":$("#email").val(),
                "name":$("#name").val(),
                "phone":$("#phone").val(),
                "inquiry":$("#inquiry").val()
              }),
              success: function(response){ 
                
                var tempModal = GenModal(null, {
                    "title": "You Inquiry has been sent!",
                    //"dom": domobject, 
                    //"html": MappingFailures.join(" - "),
                    "description": "A member of our team will get back to you as soon as possible"
                });
                $(tempModal).modal("show");
              
              },
              dataType: "json" 
            });
          }
        }
      }
      else{
        var tempModal = GenModal(null, {
            "title": "Your contact form is invalid",
            //"dom": domobject, 
            //"html": MappingFailures.join(" - "),
            "description": "Please fix all items that were invalid on your contact formmarked in red"
        });
        $(tempModal).modal("show");
      }
    });
  });
  
  if(get("inquiry")!=false){
    $("#inquiry").val(get("inquiry"));
  }

  function validateName(){
    $("#name").removeClass("border-danger");
    $("#name").removeClass("border-success");
    var valid = /^[a-zA-Z\-'\s]+$/.test($("#name").val());
    if(valid){
      $("#name").addClass("border-success");
      $("#name").popover('hide');
    }
    else{
      $("#name").addClass("border-danger");
      $("#name").popover({
        content:"Please enter a valid name like `Jane O'Malley-Son`",
        placement:"top"
      });
      $("#name").popover('show');
    }
    return valid;
  }

  function validatePhone(){
    $("#phone").removeClass("border-danger");
    $("#phone").removeClass("border-success");
    var valid =/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test($("#phone").val())
    if(valid){
      $("#phone").addClass("border-success");
      $("#phone").popover('hide');
    }
    else{
      $("#phone").addClass("border-danger");
      $("#phone").popover({
        content:"Please enter a valid phone number",
        placement:"top"
      });
      $("#phone").popover('show');
    }
    return valid;
  }

  function conserver(todo,delaytime=1000){
    this.todofunc=todo;
    this.compensate=0;
    this.delay=function(todo = null){
      this.compensate++;
      var thisObj =this;
      setTimeout(function(){
        thisObj.compensate--;
        if(thisObj.compensate==0){
          if(todo==null){
              thisObj.todofunc();
          }
          else{
              todo();
          }
        }
      },delaytime)
    }
  }

  var callConserver=new conserver();

  function GenModal(parent = null, options = null) {
        var ModalFade = document.createElement("div");
        ModalFade.setAttribute("class", "modal fade");
        ModalFade.setAttribute("tabindex", "-1");
        ModalFade.setAttribute("role", "dialog");
        ModalFade.setAttribute("aria-labelledby", "GenericModalLabel");
        $(ModalFade).on("click", function (event) {
            $(ModalFade).modal('hide');
            setTimeout(function () {
                $(ModalFade).remove();
            }, 1000)
        });

        var ModalDialog = document.createElement("div");
        ModalDialog.setAttribute("class", "modal-dialog");
        ModalDialog.setAttribute("role", "document");

        var ModalContent = document.createElement("div");
        ModalContent.setAttribute("class", "modal-content");

        $(ModalContent).on('click', function (event) {
            event.stopPropagation();
        })

        var ModalHeader = document.createElement("div");
        ModalHeader.setAttribute("class", "modal-header");

        var ModalTitle = document.createElement("h5");
        ModalTitle.setAttribute("id", "GenericModalLabel");
        ModalTitle.setAttribute("class", "modal-title");
        ModalTitle.appendChild(document.createTextNode(options["title"]));

        var ModalButton = document.createElement("button");
        ModalButton.setAttribute("type", "button");
        ModalButton.setAttribute("class", "btn btn-sm close");
        ModalButton.setAttribute("data-dismiss", "modal");
        ModalButton.setAttribute("aria-label", "Close");

        $(ModalButton).on("click", function (event) {
            $(ModalFade).modal('hide');
            setTimeout(function () {
                $(ModalFade).remove();
            }, 1000)
        });

        var ModalButtonSpan = document.createElement("span");
        ModalButtonSpan.setAttribute("aria-hidden", "true");
        ModalButtonSpan.innerHTML = "&times;";

        var ModalBody = document.createElement("div");
        ModalBody.setAttribute("class", "modal-body");
        if ("dom" in options) {
            ModalBody.appendChild(options["dom"]);
        }
        else if ("html" in options) {
            ModalBody.innerHTML = options["html"];
        }
        else {
            ModalBody.appendChild(document.createTextNode(options["description"]));
        }

        var ModalFooter = document.createElement("div");
        ModalFooter.setAttribute("class", "modal-footer");

        var ModalFooterButtonClose = document.createElement("button");
        ModalFooterButtonClose.setAttribute("type", "button");
        ModalFooterButtonClose.setAttribute("class", "btn btn-sm btn-secondary");
        ModalFooterButtonClose.setAttribute("data-dismiss", "modal");
        ModalFooterButtonClose.appendChild(document.createTextNode("Close"));

        $(ModalFooterButtonClose).on("click", function (event) {
            $(ModalFade).modal('hide');
            setTimeout(function () {
                $(ModalFade).remove();
            }, 1000)
        });

        ModalFade.appendChild(ModalDialog);
        ModalDialog.appendChild(ModalContent);
        ModalContent.appendChild(ModalHeader);
        ModalHeader.appendChild(ModalTitle);
        ModalHeader.appendChild(ModalButton);
        ModalButton.appendChild(ModalButtonSpan);
        ModalContent.appendChild(ModalBody);
        ModalContent.appendChild(ModalFooter);
        ModalFooter.appendChild(ModalFooterButtonClose);

        if (parent == null) {
            return ModalFade;
        }
        else {
            parent.appendChild(ModalFade);
        }
  }
  
};
  
</script>
</body>
</html>
